{% extends "layout.html" %}

{% block content %}
    <header class="container-fluid">
        <div class="container text-center" id="uploadBox">
            <h1>NessusNibbler</h1>
            <div class="form col-xs-12">
                <form id="upload-form" action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data">
                    <input type="file" name="file" id="file" multiple required>
                    <label for="file" class="custom-file-upload">
                        <i class="fas fa-cloud-upload-alt"></i> <span id="file-label">Browse...</span>
                    </label>
                    <input type="submit" value="Upload">
                </form>
            </div>
            <div class="d-flex justify-content-between mt-3">
                <a href="{{ url_for('control_panel') }}" class="btn btn-danger" style="width: 100%;">Control Panel</a>
            </div>
        </div>
    </header>
    <div id="mainBody" class="container text-center">
        <div id="progress-container">
            <div id="progress-bar"></div>
        </div>
        <div id="output"></div>
    </div>
    <footer class="text-center"></footer>
    {% block scripts %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const nav = document.querySelector('nav');
            if (nav) {
                nav.style.display = 'none';
            }
    
            const fileInput = document.getElementById('file');
            const fileLabel = document.getElementById('file-label');
    
            fileInput.addEventListener('change', function() {
                if (fileInput.files.length > 1) {
                    fileLabel.textContent = fileInput.files.length + " files selected";
                } else if (fileInput.files.length === 1) {
                    fileLabel.textContent = "1 file selected";
                } else {
                    fileLabel.textContent = "Browse...";
                }
            });
        });
    </script>
    {% endblock %}
{% endblock %}
